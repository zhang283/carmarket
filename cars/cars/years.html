<!DOCTYPE HTML>










<html>
<head>
    <meta http-equiv="x-ua-compatible" content="IE=edge"/>
    <link rel="icon" href="//static.ed.edmunds-media.com/unversioned/img/favicon/favicon.ico" />
    <script>
        if (window.performance && performance.mark) {
            performance.mark("edmParseMarkupStart");
        }
    </script>
<link href="//edw.edmunds.com" rel="dns-prefetch" />
<link href="//udm.edmunds.com" rel="dns-prefetch" />
<link href="//services.edmunds-media.com" rel="dns-prefetch" />
<link href="//media.ed.edmunds-media.com" rel="dns-prefetch" />
<link href="//partner.googleadservices.com" rel="dns-prefetch" />
<link href="//www.googletagservices.com" rel="dns-prefetch" />
<link href="//pagead2.googlesyndication.com" rel="dns-prefetch" />
<link href="//pubads.g.doubleclick.net" rel="dns-prefetch" />
<link href="//ad.doubleclick.net" rel="dns-prefetch" />
<link href="//help.edmunds.com" rel="dns-prefetch" />
<link href="//www.googleadservices.com" rel="dns-prefetch" />
<!--[if lte IE 9]>
<link href="//edw.edmunds.com" rel="prefetch" />
<link href="//udm.edmunds.com" rel="prefetch" />
<link href="//media.ed.edmunds-media.com" rel="prefetch" />
<link href="//services.edmunds-media.com" rel="prefetch" />
<link href="//partner.googleadservices.com" rel="prefetch" />
<link href="//www.googletagservices.com" rel="prefetch" />
<link href="//pagead2.googlesyndication.com" rel="prefetch" />
<link href="//pubads.g.doubleclick.net" rel="prefetch" />
<link href="//ad.doubleclick.net" rel="prefetch" />
<link href="//help.edmunds.com" rel="prefetch" />
<link href="//www.googleadservices.com" rel="prefetch" />
<![endif]-->

    <meta property="fb:page_id" content="5798888989" />
    <link rel="publisher" href="https://plus.google.com/106326607174519341980" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    
    <link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/edm.snarcy-slim.css" type="text/css" media="all" />

<script type="text/javascript">PAGESETUP = {VERSION:'2.1.2', timer:{start:(new Date()).getTime(), load_evt:-1}, yuicdn:'//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/yui2', edmuicdn:'//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/edmui', staticcdn:'//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/', default_libs:['//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/utilities.js']};</script>    

    <!--[if lt IE 9]><script src="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/ie8-browser-compatibility.js"></script><![endif]-->
    <!--[if lt IE 8]><script src="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/ie7-browser-compatibility.js"></script><![endif]-->
    <!--[if lt IE 7]><link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/edmunds.simple.ie6.css" type="text/css" media="all" /><![endif]-->

    <meta name="apple-itunes-app" content="app-id=393630966">



	 
<noscript>
		<img src="http://edw.edmunds.com/edw/edw1x1.gif?Javascript=no" height="0" width="0" />
</noscript>







<script type="text/javascript">
    (function(){
        PAGESETUP = PAGESETUP||{};
        PAGESETUP.scope = PAGESETUP.scope || {};
        PAGESETUP.scope.pageProps = PAGESETUP.scope.pageProps || {};
        PAGESETUP.scope.pageProps.keyvalues = PAGESETUP.scope.pageProps.keyvalues || '';
        PAGESETUP.scope.environmentURL = "http://www.edmunds.com";
        PAGESETUP.scope.environmentEdwURL = 'http://edw.edmunds.com';
        PAGESETUP.scope.secureEnvironmentURL = "https://secure.edmunds.com";
		PAGESETUP.scope.staticContent = '//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/';
        PAGESETUP.scope.staticContentWro = '//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/';
        PAGESETUP.scope.damUrl = 'http://media.ed.edmunds-media.com';
        PAGESETUP.scope.timestamp = new Date().getTime();
        PAGESETUP.scope.dartTimestamp = PAGESETUP.scope.timestamp;
        PAGESETUP.scope.path = '/vehiclelanding/model/years';

        var tdata = {
            ad_make:'bmw',
            edw_make_id: '200000081',
            ad_model:'x5m',
            edw_model_link_code:'m100035',
            ad_year:'',
            edw_model_year_id:'',
            edw_submodel_id:'',
            ad_style:'',
            ad_submodel:'x5msuv',
            mktid:'',
            mktcat:'',
            kw:''
        };

        tdata.offermaticTracking = false;


            tdata.prop22 = 'Aug 11, 2010';



            tdata.ad_tracking_submodel='x5m suv';

            tdata.edwmk='bmw';
                tdata.ad_model='x5m';
                    PAGESETUP.scope.pageProps['sitename'] = 'bmw.new.dart/agnostic';
                tdata.edwsubmdl='x5m suv';





		tdata.og_edwpg='new_model_year_index';
        tdata.og_edwcat='new_model_year_index';
		tdata.edwpg='new_model_year_index';
        tdata.edwcat='new_model_year_index';

        tdata.TRACKING_usein = 'new';

        tdata.ad_keyvalues = 'mdl=x5m;year=agnostic;sub=x5msuv;dcopt=ist;sect7=prev;';

        tdata.ad_usein = '.new';

        tdata.TRACK_querystring='';
        if (typeof(PAGESETUP.scope.trackDataCallback) == "function") {
            PAGESETUP.scope.trackDataCallback(tdata);
        }
        PAGESETUP.scope.tracking_data = tdata;
    })();
</script>

        <script type="text/javascript">
            window.EDM = window.EDM||{};
            EDM.PageValues = EDM.PageValues||{};
            EDM.PageValues.page = {"name":"new_model_year_index","category":"new_model_year_index","webapp":"vehiclelanding-web","trackerIdSuffix":"","timestamp":"","pageViewId":"","cmsPlatform":"WIRED","foreseeExclude":false}
            EDM.PageValues.vehicle = {"make":"bmw","makeId":"","model":"x5m","submodelId":"","submodel":"x5msuv","submodelNiceName":"x5m suv","styleId":"","year":"","type":"","useIn":"new","adsuseIn":"new","adBodyTypes":["crossover","suv","luxury"],"audSegInit":true}
            EDM.PageValues.ads = {"app":"wired","networkCode":"75548861","cmsPlatform":"WIRED","gptDisableInitialAdLoad":false}
            EDM.PageValues.urls = {"www":"http://www.edmunds.com","dam":"http://media.ed.edmunds-media.com","edw":"http://edw.edmunds.com","staticContent":"//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/","unversioned":"//static.ed.edmunds-media.com/unversioned/","imageService":"http://services.edmunds-media.com","wro":"//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/","pageFeedPath":"/vehiclelanding/model/years"}
            EDM.PageValues.wtf = {"cohort":"unassigned","campaigns":[{"name":"as_dfp","recipe":"chal"},{"name":"max-29_dfp","recipe":"ctrl"},{"name":"mad_821","recipe":"mad_chal"},{"name":"pr-alert6","recipe":"chal"}],"size":4,"campaign":"","recipe":"chal"}
            
            EDM.PageValues.tid = { "fromPrevPage" :""}
        </script>
                <script type="text/javascript">
            window.EDM = window.EDM||{};
            EDM.KRUX = EDM.KRUX||{};
            EDM.KRUX.page = {"name":"new_model_year_index","category":"new_model_year_index","webapp":"vehiclelanding-web","trackerIdSuffix":"","timestamp":"","pageViewId":"","cmsPlatform":"WIRED","foreseeExclude":false};
            EDM.KRUX.vehicle = {"make":"bmw","makeId":"","model":"x5m","submodelId":"","submodel":"x5msuv","submodelNiceName":"x5m suv","styleId":"","year":"","type":"","useIn":"new","adsuseIn":"new","adBodyTypes":["crossover","suv","luxury"],"audSegInit":true};
            EDM.KRUX.criteo = {}; EDM.KRUX.criteo.price = '30';
        </script>





        
<script type = "text/javascript">
    EDM.PageValues.gptCharLimitAd = 1000;
</script>

<script type="text/javascript" src="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/base-slim.js" charset="utf-8"></script>
<script type="text/javascript" async src="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/global-slim.js" charset="utf-8"></script>

    <script type="text/javascript">
        var removeForceUdmCookie = function() {
            document.cookie = 'forceUdm=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
        var putForceUdmCookie = function() {
            document.cookie = 'forceUdm=true';
        }
    </script>


<script type="text/javascript">
    document.cookie="udm-timer-start="+new Date().getTime()+";domain=.edmunds.com;path=/";
</script>


<script type="text/javascript">
    EDM.UDMSegment.savesegmentStart = new Date().getTime();
    (function(){

        var st = document.createElement('script');
        st.type = 'text/javascript';
        st.async = true;
        st.src = 'http://udm.edmunds.com/api/savesegment?u0='+(EDM.Core.Cookie.getAsString("edmunds")||"")+
            '&u2=bmw&u3=x5m&u4=&u5=&u6=new&u7=crossover&u7=suv&u7=luxury&u8='+
            '&u9='+(PAGESETUP.scope.tracking_data.edw_model_link_code||"") +
            '&u10=x5msuv&u11='+(EDM.Core.Cookie.getAsMap("EdmundsYear").zip||"")+
            '&u13='+Date.now()+'&u14='+(EDM.Core.Cookie.getAsString("edm-routes-2")||"")+
            '&u15='+(EDM.Core.Cookie.getAsString("udm-last-access")||"")+
            '&pn=new_model_year_index';
        (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(st);
    })();
</script>

<!-- ncrs_dfp is called -->
<script type="text/javascript">
	EDM.UDMSegment.typeAdFlag = 'true';
</script>
<!-- ncrs_dfp is called -->

<script type="text/javascript">
        try {
            EDM.UDMSegment.enable = true;
            EDM.UDMSegment.SegPref = 'default';

            EDM.UDMSegment.Rules.AimPages = {"sponsored_curated_page_aim":["hondapilot"]}
            EDM.UDMSegment.minRCModels = 5;

            EDM.qLoader.defer("nowait", function () {
                /**
                 * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)
                 *
                 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
                 * @see http://github.com/garycourt/murmurhash-js
                 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
                 * @see http://sites.google.com/site/murmurhash/
                 *
                 * @param {string} key ASCII only
                 * @param {number} seed Positive integer only
                 * @return {number} 32-bit positive integer hash
                 */
                function murmurhash3_32_gc(key, seed) {
                    var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;

                    remainder = key.length & 3; // key.length % 4
                    bytes = key.length - remainder;
                    h1 = seed;
                    c1 = 0xcc9e2d51;
                    c2 = 0x1b873593;
                    i = 0;

                    while (i < bytes) {
                        k1 =
                                ((key.charCodeAt(i) & 0xff)) |
                                        ((key.charCodeAt(++i) & 0xff) << 8) |
                                        ((key.charCodeAt(++i) & 0xff) << 16) |
                                        ((key.charCodeAt(++i) & 0xff) << 24);
                        ++i;

                        k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;
                        k1 = (k1 << 15) | (k1 >>> 17);
                        k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;

                        h1 ^= k1;
                        h1 = (h1 << 13) | (h1 >>> 19);
                        h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;
                        h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));
                    }

                    k1 = 0;

                    switch (remainder) {
                        case 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
                        case 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
                        case 1: k1 ^= (key.charCodeAt(i) & 0xff);

                            k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
                            k1 = (k1 << 15) | (k1 >>> 17);
                            k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
                            h1 ^= k1;
                    }

                    h1 ^= key.length;

                    h1 ^= h1 >>> 16;
                    h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;
                    h1 ^= h1 >>> 13;
                    h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;
                    h1 ^= h1 >>> 16;

                    return h1 >>> 0;
                }

                var getVisitorId = function() {
                    var $C = EDM.Core.Cookie;
                    return $C.get("edmunds", {});
                }

                var pruneRules = function(visitorId, allRulesMap) {
                    for (rule in allRulesMap) {
                        var thisRule = allRulesMap[rule];
                        if (!isValidDate(thisRule.qualifier.startDate, thisRule.qualifier.endDate) || !isIncludedBasedOnPercentage(visitorId, thisRule.segment, thisRule.qualifier.percentage)) {
                            delete allRulesMap[rule];
                        }
                    }
                }

                var isIncludedBasedOnPercentage = function(visitorId, segment, percentage) {
                    var hashedVisitorId = murmurhash3_32_gc(visitorId+segment, 100);
                    return hashedVisitorId % 100 <= percentage;
                }

                var isValidDate = function(start, end) {
                    var thisDate = new Date().getTime();
                    var startDate = new Date(start).getTime();
                    var endDate = (end)? new Date(end).getTime() : thisDate;
                    return (startDate <= thisDate && endDate >= thisDate);
                }

                var visitorId = getVisitorId();
                if (EDM.UDMSegment && EDM.UDMSegment.Service) {
                    EDM.UDMSegment.Segment.AllRulesMap = 
        
        {
            seed_seg : new EDM.UDMSegment.SeedSegment.Rule(
                {   startDate:"01/08/2015",
                    percentage:100,
                    reProcess:true
                }, 'seed_seg'),
            conquest_seg : new EDM.UDMSegment.Rules.ConquestRule(
                {   startDate:"01/08/2015",
                    percentage:100,
                    reProcess:true
                }, 'conquest_seg', 10, 86400000),
            exp_seg : new EDM.UDMSegment.Rules.ExperimentRule(
                {   startDate:"01/08/2015",
                    percentage:100,
                    reProcess:true
                }, 'exp_seg'),
            rcmdl_seg : new EDM.UDMSegment.Rules.RCModelRule(
                {   startDate:"1/08/2015",
                    percentage:100,
                    reProcess:true
                }, "rcmdl_seg"),
            typeAds_seg : new EDM.UDMSegment.Rules.TypeAdsRule(
                {   startDate:"6/1/2015",
                    percentage:100,
                    reProcess:true
                }, "typeAds_seg")
        };
        
    
                    pruneRules(visitorId, EDM.UDMSegment.Segment.AllRulesMap);
                    EDM.UDMSegment.Service.init();
                }
            });
        } catch(emptyForGoogle) {
        }
    </script>

<!-- aol bidding start -->

<!-- no implementation audience-->  
<script type="text/javascript">
    window.EDM=window.EDM||{};
    EDM.UDMSegment = EDM.UDMSegment ||{};
    EDM.UDMSegment.AolBid = EDM.UDMSegment.AolBid || {};
</script>


<!-- aol bidding end -->

<!-- sonobi bidding start -->


<!-- sonobi bidding end -->



<!-- ss_dfp -->
<script type="text/javascript">

    EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/edm.snarcy-slim.js');
</script>



        
        <script>
            window.googletag = window.googletag||{};
googletag.cmd = googletag.cmd||[];



    EDM.qLoader.defer('nowait', function(){
      (function () {
  var gads = document.createElement("script");
  gads.async = true;
  gads.type = "text/javascript";
  gads.src = "//www.googletagservices.com/tag/js/gpt.js";
  var node = document.getElementsByTagName("script")[0];
  node.parentNode.insertBefore(gads, node);

  googletag.cmd.push(function () {
	  EDM.Ads.Gpt.init({enableSRA:true});
  });
  })();

    });


        </script>

    <title>BMW X5 M SUV - Available Years </title>
<META name="description" content="This guide to the BMW X5 M SUV includes current and previous model information, specs and buying advice.">
<META name="keywords" content= "BMW X5 M, SUV, Performance">
<link rel="canonical" href="http://www.edmunds.com/bmw/x5-m/suv/years/" />
<link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/vehicle-directory-simple.css" type="text/css" media="all" />
<link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/vehicle-landing-review-snarcy.css" type="text/css" media="all" />
<meta property="og:title" content="BMW X5 M - Available Years"/>
<meta property="og:type" content="article"/>
<meta property="og:image" content="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/img/logo-print.png"/>
<meta property="og:url" content="http://www.edmunds.com/bmw/x5-m/suv/years/" />
<meta property="og:site_name" content="Edmunds"/>
<meta property="og:admins" content="6230134, 9700214, 300100577, 694037044, 100001443143026, 696964477, 561478297, 719501952, 10000004664664, 100000321489759"/>
<meta property="fb:page_id" content="5798888989"/>
<meta property="og:description" content="This guide to the BMW X5 M SUV includes current and previous model information, specs and buying advice."/>
<link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/socialToolbar.css" type="text/css" media="all"/>
<link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/help-widget.css" type="text/css" media="all"/>
<link rel="stylesheet" href="//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/sentiment-widget-sidebar.css" type="text/css" media="all"/>
        <meta name="viewport" content="width=device-width, initial-scale=0.9, user-scalable=yes">

</head>

<body class="snarcy " itemscope itemtype="http://schema.org/WebPage">
<script>
    if (window.performance && performance.mark) {
        performance.mark("edmParseMarkupBodyStart");
        if (window.requestAnimationFrame) {
            requestAnimationFrame(function() {
                performance.mark("edmFirstPaint");
            });
        }
    }
</script>
<div id="edm_document" class=" snarcyGold">

    <div id="edm_header" class="grid-216 tid">
        <script>
                    (function(){
            var num;
            if(window.location.search && window.location.search.indexOf('appd_eum') != -1){
                num = 1;
            } else {
                num = Math.floor((Math.random()*100)+1);
            }
            if(num < 6){
                    window["adrum-app-key"] = "AD-AAB-AAA-GNU";
                window['adrum-start-time'] = new Date().getTime();
                var s = document.getElementsByTagName('script')[0],
                        p = document.createElement('script');
                p.src = document.location.protocol + '//static.ed.edmunds-media.com/unversioned/appd-eum/adrum.js';
                p.async = true;
                s.parentNode.insertBefore(p, s);
            }
        })();

        </script>







        <script>
                    EDM.qLoader.defer(1, function() {
            if (EDMUNDS && EDMUNDS.User) {
                EDMUNDS.User.setZipcode("61801");
                EDMUNDS.User.setDMA("648");
                EDMUNDS.Cookie.setSub('EdmundsYear', 'city', 'Urbana', {expires: new Date(new Date().getTime() + 60*1000*60*24*365*1), path: '/', domain: '.edmunds.com'});
                EDMUNDS.User.setState("IL");
            }
        });

        </script>




<ul id="edm_main_nav" class="grid-212 small-txt">



<li id="logo_item"
    class="grid-29 homepage_logo_image ">
        <a href="/">


        <span class="logo_box_dims">Edmunds.com</span>



</a>

</li>




<li id="pp_carhead_item"
    class="grid-23 full-img ppp-img ">
        <a href="/price-promise.html">



   <div class="pp-dropdown" >
        <div class="pp-logo">
            <span class="price">Price</span>
            <span class="promise">Promise</span><span class="sm"><sup>&#8480;</sup></span>
        </div>
        <span class="pp-upfront">Get instant savings</span>
    </div>

</a>

</li>




<li id="make_item"
    class="grid-18 mmy dd">

        <span class="item-title">Make</span>






        <span class="dd-arrow"></span>


    <div class="dd-container">
        <div class="dd-inner-wrap overflow-hidden grid-202">
            <div class="grid-142"
                 id="make_dd">
                    <div class="dd-content-wrap">Tell us what <strong>Make</strong> you're looking for.</div>
            </div>
            <div class="grid-60" style="height:146px;">



<div class="navblock-ad  wide-bottom" >
    <div id="make_navblockad">
        <script>
                        EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                if (EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)) {
                    EDM.qLoader.defer(10, function () {
                        var v = {
                            "adType": "async-gpt-sra",
                            "adName": "navblock",
                            "sizes": [
                                [291, 88]
                            ],
                            "position": "1",
                            "category": "navblock,",
                            "customTargeting": ""
                        };

                        EDM.Ads.Navblock.init(make_navblockad, v);
                    });
                }

})});

        </script>
    </div>
</div>
			</div>
        </div>
    </div>

</li>




<li id="model_item"
    class="grid-18 mmy dd">

        <span class="item-title">Model</span>






        <span class="dd-arrow"></span>


    <div class="dd-container">
        <div class="dd-inner-wrap overflow-hidden grid-202">
            <div class="grid-142"
                 id="model_dd">
                    <div class="dd-content-wrap">                            <strong>Oops</strong>! First tell us what            <strong>Make</strong> you're interested in.        </div>
            </div>
            <div class="grid-60" style="height:146px;">



<div class="navblock-ad  wide-bottom" >
    <div id="model_navblockad">
        <script>
                        EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                if (EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)) {
                    EDM.qLoader.defer(10, function () {
                        var v = {
                            "adType": "async-gpt-sra",
                            "adName": "navblock",
                            "sizes": [
                                [291, 88]
                            ],
                            "position": "2",
                            "category": "navblock,",
                            "customTargeting": ""
                        };

                        EDM.Ads.Navblock.init(model_navblockad, v);
                    });
                }

})});

        </script>
    </div>
</div>
			</div>
        </div>
    </div>

</li>




<li id="year_item"
    class="grid-18 mmy dd">

        <span class="item-title">Year</span>






        <span class="dd-arrow"></span>


    <div class="dd-container">
        <div class="dd-inner-wrap overflow-hidden grid-202">
            <div class="grid-142"
                 id="year_dd">
                    <div class="dd-content-wrap">                            <strong>Oops</strong>! First tell us what            <strong>Make</strong> you're interested in.        </div>
            </div>
            <div class="grid-60" style="height:146px;">



<div class="navblock-ad  wide-bottom" >
    <div id="year_navblockad">
        <script>
                        EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                if (EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)) {
                    EDM.qLoader.defer(10, function () {
                        var v = {
                            "adType": "async-gpt-sra",
                            "adName": "navblock",
                            "sizes": [
                                [291, 88]
                            ],
                            "position": "3",
                            "category": "navblock,",
                            "customTargeting": ""
                        };

                        EDM.Ads.Navblock.init(year_navblockad, v);
                    });
                }

})});

        </script>
    </div>
</div>
			</div>
        </div>
    </div>

</li>




<li id="body_type_item"
    class="grid-18 dd">

        <span class="item-title">Car<br />Type</span>






        <span class="dd-arrow"></span>


    <div class="dd-container">
        <div class="dd-inner-wrap overflow-hidden grid-202">
            <div class="grid-142">
                    <div class="dd-content-wrap">Tell us what <strong>Type of Car</strong> you're interested in.        </div>
                        <ul class="dd-links ">
                                <li><a href="/suv/"
                                       rel="suv">SUV</a>
                                </li>
                                <li><a href="/sedan/"
                                       rel="sedan">Sedan</a>
                                </li>
                                <li><a href="/truck/"
                                       rel="truck">Truck</a>
                                </li>
                                <li><a href="/minivan/"
                                       rel="minivan">Minivan</a>
                                </li>
                                <li><a href="/convertible/"
                                       rel="convertible">Convertible</a>
                                </li>
                                <li><a href="/coupe/"
                                       rel="coupe">Coupe</a>
                                </li>
                                <li><a href="/wagon/"
                                       rel="wagon">Wagon</a>
                                </li>
                                <li><a href="/luxury/"
                                       rel="luxury">Luxury</a>
                                </li>
                                <li><a href="/hybrid/"
                                       rel="hybrid">Hybrid/Electric</a>
                                </li>
                                <li><a href="/crossover/"
                                       rel="crossover">Crossover</a>
                                </li>
                                <li><a href="/hatchback/"
                                       rel="hatchback">Hatchback</a>
                                </li>
                                <li><a href="/diesel/"
                                       rel="diesel">Diesel</a>
                                </li>
                        </ul>
            </div>
            <div class="grid-60" style="height:146px;">



<div class="navblock-ad  wide-bottom" >
    <div id="body_navblockad">
        <script>
                        EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                if (EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)) {
                    EDM.qLoader.defer(10, function () {
                        var v = {
                            "adType": "async-gpt-sra",
                            "adName": "navblock",
                            "sizes": [
                                [291, 88]
                            ],
                            "position": "4",
                            "category": "navblock,",
                            "customTargeting": ""
                        };

                        EDM.Ads.Navblock.init(body_navblockad, v);
                    });
                }

})});

        </script>
    </div>
</div>
			</div>
        </div>
    </div>

</li>




<li id="new_car_item"
    class="grid-14 ">
        <a href="/new-cars/">


        <span class="item-title">New<br />Cars</span>



</a>

</li>




<li id="used_car_item"
    class="grid-14 ">
        <a href="/used-cars/">


        <span class="item-title">Used<br />Cars</span>



</a>

</li>




<li id="research_item"
    class="grid-21 research dd">

        <span class="item-title">Car<br />Research</span>






        <span class="dd-arrow"></span>


    <div class="dd-container">
        <div class="dd-inner-wrap overflow-hidden grid-202">
            <div class="grid-142"
                 id="research_dd">
                        <ul class="dd-links first">
                            <li class="group-head">
                                <a href="/new-cars/">New Cars</a>
                            </li>
                                    <li><a href="/finder/car-finder-results.html"
                                       >Car Finder</a>
                                    </li>
                                    <li><a href="/car-comparisons/"
                                       >Compare New Cars</a>
                                    </li>
                                    <li><a href="/dealer-reviews/"
                                       >Find a Dealer</a>
                                    </li>
                                    <li><a href="/car-incentives/"
                                       >Incentives & Rebates</a>
                                    </li>
                                    <li><a href="/calculators/"
                                       >Calculators</a>
                                    </li>
                        </ul>
                        <ul class="dd-links">
                            <li class="group-head">
                                <a href="/used-cars/">Used Cars</a>
                            </li>
                                    <li><a href="/appraisal/"
                                       >Trade-In Value & Pricing</a>
                                    </li>
                                    <li><a href="/certified-cars/"
                                       >Certified Cars</a>
                                    </li>
                                    <li><a href="/sell-car/"
                                       >Selling Tips</a>
                                    </li>
                        </ul>
                        <ul class="dd-links">
                            <li class="group-head">
                                <a href="/car-reviews/">Car Reviews</a>
                            </li>
                                    <li><a href="/cars/"
                                       >Tips & Advice</a>
                                    </li>
                                    <li><a href="/whats-hot/"
                                       >What's Hot</a>
                                    </li>
                                    <li><a href="/car-videos/"
                                       >Car Videos</a>
                                    </li>
                                    <li><a href="http://forums.edmunds.com/sso?target=/"
                                       >Car Forums</a>
                                    </li>
                                    <li><a href="/car-reviews/best-cars.html"
                                       >Best Cars Lists</a>
                                    </li>
                        </ul>
                        <ul class="dd-links login">
                            <li class="group-head">
                                <a href="https://secure.edmunds.com/era/secure/nlb/login.jsp?test=true">Account</a>
                            </li>
                        </ul>
            </div>
            <div class="grid-60" style="height:146px;">



<div class="navblock-ad  wide-bottom" >
    <div id="research_navblockad">
        <script>
                        EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                if (EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)) {
                    EDM.qLoader.defer(10, function () {
                        var v = {
                            "adType": "async-gpt-sra",
                            "adName": "navblock",
                            "sizes": [
                                [291, 88]
                            ],
                            "position": "5",
                            "category": "navblock,",
                            "customTargeting": ""
                        };

                        EDM.Ads.Navblock.init(research_navblockad, v);
                    });
                }

})});

        </script>
    </div>
</div>
			</div>
        </div>
    </div>

</li>




<li id="help_item"
    class="grid-12 ">

<span class="header_image"></span><span class="header_text">Help</span>
    





</li>




<li id="search_item"
    class="grid-26 align-right ">

          <form action="/search/results.html" method="get" accept-charset="utf-8" id="header_form">          <div style="height:16px"></div>          <div class="header_ac" style="line-height:0px">          <input type="text" name="q" id="search_text" class="" placeholder="Search"><div class="search_divider_wrap"><div class="search_divider"></div></div><input type="submit" id="header_submit" name="header_submit" value="" />          <input type="hidden" name="src" value="usergen"><input type="hidden" name="ac" value=""></div></form>





</li>

</ul>

        <script>
                EDM.qLoader.prefetch("/api/vehicle/v2/makes?fmt=json&state=new&state=future&view=full");

        </script>

        <script>
                EDM.PageValues.vehicle['snarcyMake'] = 'bmw';
    EDM.PageValues.vehicle['snarcyModel'] = 'x5-m';
    EDM.PageValues.vehicle['snarcyYear'] = '';
    EDM.PageValues.vehicle['snarcyCategory'] = 'suv';
    EDM.PageValues.vehicle['snarcyPs'] = '';
    EDM.PageValues.vehicle['snarcyCpo'] = '';
    EDM.PageValues.vehicle['snarcyStyleId'] = '';

    EDM.qLoader.defer(902, function () {
        if (EDM.Nav && EDM.Nav.ClickPrimer) {
            EDM.Nav.ClickPrimer.execute('edm_main_nav');
        }
    });
    
                                    (function() {            var popularMakeExclusions = ["Alfa Romeo", "Aston Martin", "Bentley",            "Ferrari", "Fisker", "Lamborghini", "Lotus", "Maserati", "Maybach", "McLaren", "Rolls-Royce", "Saab"];            var makeListIcons = {                "mazda" : {                    "imageURL" : "http://static.ed.edmunds-media.com/unversioned/unit/make-dropdown/icons/mazda.png",                    "cssClass" : "icon"                    }            };            EDM.qLoader.defer(20, function() {                EDM.Widget.Vehicle.SnarcyNavPrimer.execute('make_dd', 'model_dd', 'year_dd', { 'trackMakeListIcon':true,                "excludePreProd":false, "popularMakeExclusions":popularMakeExclusions, 'makeListIcons': makeListIcons }); });            })();                    




        </script>

<style type="text/css">
    #edm_header #edm_main_nav.small-txt .swipe-carousel .carousel-next span, #edm_header #edm_main_nav.small-txt .swipe-carousel .carousel-prev span {
        margin: 0;
    }
</style></div>


    <script>
        if (window.performance && performance.mark) {
            performance.mark("edmParseMarkupArticleStart");
        }
    </script>
     <div id="edm_article" class="grid-216 tid" ><!--START - /edmunds/sites/vehicledirectory/main/src/main/webapp/WEB-INF/freemarker/vehicledirectory/templates/model.ftl-->






        <script>
                    EDM.qLoader.defer(1, function() {
            if (EDMUNDS && EDMUNDS.User) {
                EDMUNDS.User.setZipcode("61801");
                EDMUNDS.User.setDMA("648");
                EDMUNDS.Cookie.setSub('EdmundsYear', 'city', 'Urbana', {expires: new Date(new Date().getTime() + 60*1000*60*24*365*1), path: '/', domain: '.edmunds.com'});
                EDMUNDS.User.setState("IL");
            }
        });

        </script>









    
    









		


   
    
<div id="top"
     class="container   grid-216
          gutter-vertical-2
     no-gutter-vertical tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="top-anchor" id="top-anchor"></span>
    <div class="content grid-216">
            

<div id="breadcrumb" class="grid-216  no-gutter-top">
        <div class="content">

                            <a href="/">Home</a><span
                                class="delimiter"> / </span>

                            <a href="/new-cars/">New Cars</a><span
                                class="delimiter"> / </span>

                            <a href="/bmw/?ps=new">BMW</a><span
                                class="delimiter"> / </span>

                            <a href="/bmw/x5-m/?ps=new">X5 M</a><span
                                class="delimiter"> / </span>
            <span class="current">
                    Years
            </span>
        </div>






    <div id="socialToolbar" class="collapsed with-icons" contenteditable="false">
        <span class="title">Share This Page</span>
        <span class="twit-icon"></span>
        <span class="google-icon"></span>
        <div>
            <span id="tweeterContainer"></span><span id="googleContainer"></span>
        </div>
    </div>
    <script type="text/javascript">
        EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/socialToolbar.js');
        EDM.qLoader.defer('low', function() {
            var socialToolbar = new EDM.SocialToolbar();
        });
    </script>


    <style>
        #socialToolbar.with-icons.collapsed {
            border-color: #FFF;
            background: #FFF;
        }
        #socialToolbar {
            height: 47px;
            margin: -16px 5px 4px;
        }
    </style>

    <style>
        #socialToolbar {
            width: 180px;
            height: 25px;
            margin: -7px 5px 0px;
        }

        .google-icon {
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFOTBDMkYyQkU2NzMxMUUyOTJBM0JEMjRDRjFDQUI2NSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFOTBDMkYyQ0U2NzMxMUUyOTJBM0JEMjRDRjFDQUI2NSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU5MEMyRjI5RTY3MzExRTI5MkEzQkQyNENGMUNBQjY1IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU5MEMyRjJBRTY3MzExRTI5MkEzQkQyNENGMUNBQjY1Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+LMWJjwAAAbtJREFUeNqcks9LVFEUxz/vvknfgJbO1OAQlD9QXAgKYpBYm2hRuQjaSLUp3QjR1lXiUvEP0I2IG4WgXZsWmUGKBblLwlCUxqZpGH3iOG/m+e67PX80+NQhnQuHew+cz5fvuedoyw9u3gPGvIhyvhP3olsUCXPIjAWOw1npYrvu/jvtSC4IQXlAx9DFqSKBo5lUCtXcxvWWVlAulx49Ib30nfTrCbIL86fa8AmoyjCN/UOsPb0Pto2zuUG4+wXJpUW0An34fJXV1KMHDXbUQW5+eIcoNSgNhfM161ausID9YxG5ZXLlYRebtkMuEiXzZRb752oevvX+q09E88aojoroFSHK73YiqusQ4Qixvl6MQ/+1b+fydSud7Scd7H1iKvmH2NQ4u/F1yuoaEDc6sKTrg/7dJxyYFyupfvwcFY/hJBOUXKuhousZK4Ov0OY//n8KDQPDpN5MImen9/OduRmy6W0u375D6iwCRqQKveoqidyut0AauqZhWBb2wueC6+hrwWhsItTzEmVlsFeXkeaGN4E1bxKfziZQzBGOq34XC3tsIvDN3Br9ZWX6c9IV54ENXZfRYHDkrwADAIXnrYTKVoKaAAAAAElFTkSuQmCC');
            width: 16px;
            height: 16px;
        }

        .twit-icon {
            background: url(https://g.twimg.com/dev/documentation/image/Twitter_logo_blue_16.png);
            width: 16px;
            height: 16px;
        }

        .google-icon, .twit-icon, #socialToolbar .title {
            margin: 5px;
        }

        #socialToolbar > div {
            padding: 12px 0 6px 0;
            width: 180px;
            top: -11px;
            z-index: -1;
        }
    </style>
</div>

            

    </div>

</div>



   
    
<div id="sub-page-1"
     class="container   grid-216
          gutter-vertical-2
     no-gutter-vertical tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="sub-page-1-anchor" id="sub-page-1-anchor"></span>
    <div class="content grid-216">
            

   
    
<div id="sub-page-1-main-container"
     class="container   grid-146
          gutter-vertical-2
     gutter-right-3 no-gutter-vertical tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="sub-page-1-main-container-anchor" id="sub-page-1-main-container-anchor"></span>
    <div class="content grid-146">
            






        <div class="span-24 leaderboard no-background snarcy-ad no-gutter-top with-title">
                <span>ADVERTISEMENT</span>
            <div id="leaderboard-ad1">
                <script type="text/javascript">
                    EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                        var $U = EDM.UDMSegment.AolBid;
                        if(EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)){
                            var adSizes = [[728,90],[1,1]];


                                var adContainer = document.querySelector("#leaderboard-ad1");
                                if(EDM.Ads.Leaderboard && EDM.Ads.Leaderboard.getBillboardAdSizes){
                                    adSizes = EDM.Ads.Leaderboard.getBillboardAdSizes(adContainer, adSizes);
                                }

                            var v = {
                                "auorder":"1",
                                "adType": "async-gpt-sra",
                                "adName":"leaderc",
                                "sizes": adSizes, //adSizes,  -- use JS var when using implementation above
                                "position":"1",
                                "category":"leaderboard,",
                                "tabDependency":"",
                                "customTargeting":""
                            };
                            var fn = function(){
                                EDM.Ads.Factory.constructAdUnit(v).render('leaderboard-ad1');
                            }
                            if ($U && $U.mode == "std" && $U.render) {
                                $U.render(v.adName+ v.position, fn)
                            } else {
                                fn()
                            }
                        }

})});
                </script>
            </div>
        </div>

            
            


<div id="modelheader" class="module available-years-header no-gutter-vertical tid">
<div class="content">
    
            <h1>BMW X5 M SUV &mdash; Available Years</h1>






</div>
</div>
            
            

    
    <div id="model-list-pod"
         class="pod colorbar specs grid-146
          gutter-vertical-2  no-gutter-vertical   tid">
            <span class="pod-anchor" name="model-list-pod-anchor" id="model-list-pod-anchor"></span>

        <div class="content grid-138">

                    





<div id="mi_tabs" class="span-16 module tid vehicle-models-new year-select">
    <h2 class="module-title">Choose a Year <span class="used-link"><a href="/bmw/x5-m/used/">See used models and reviews</a></span></h2>
    <div class="vehicle-card new-vm sh-none">
        <div class="image">
                    <img data-dfallback="//static.ed.edmunds-media.com/unversioned/img/trans.png" data-dsrc="http://media.ed.edmunds-media.com/bmw/x5-m/2015/oem/2015_bmw_x5-m_4dr-suv_base_fq_oem_1_87.jpg" alt="2015 BMW X5 M 4dr SUV Exterior" height="55" width="87" onclick="EDMUNDS.pageScope.launch_photoflipper('/photoflipper/?make=BMW&model=X5 M&submodel=X5 M SUV&year=2015',true)" />
                     <span class="link" tid="auto" onclick="EDMUNDS.pageScope.launch_photoflipper('/photoflipper/?make=BMW&model=X5 M&submodel=X5 M SUV&year=2015',true)">View photos</span>
        </div>
        <div class="info1">
            <p class="name">
                <a href="/bmw/x5-m/2015/suv/">2015 BMW X5 M SUV</a>
            </p>
            <p class="mpg">
                        <span>Fuel economy:</span>14 cty/19 hwy
            </p>
            <p class="add-info">
                        <span class="whats-new">What's New for 2015</span>
                        The 2015 X5 M is an all-new model.
            </p>
        </div>
        <div class="msrp">
                            MSRP from <span>$98,700</span>
        </div>
    </div><!-- .vehicle-card -->
    <hr class=" loose-dotted sh-none  last"></hr>

</div>

                    

        </div>
    </div>


            
            
            

    </div>

</div>

            
            

   
    
<div id="sub-page-1-right-col"
     class="container   grid-64
          gutter-vertical-2
     no-gutter-vertical gutter-left-3 tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="sub-page-1-right-col-anchor" id="sub-page-1-right-col-anchor"></span>
    <div class="content grid-64">
            
            
            

    
    <div id="dropdowncontainer-pod"
         class="pod colorbar editorial
          gutter-vertical-4 hide-module-title no-gutter-top   tid">
            <span class="pod-anchor" name="dropdowncontainer-pod-anchor" id="dropdowncontainer-pod-anchor"></span>

        <div class="content ">
            <div class="title">
                    <h2 >
                        Research Models
                    </h2>
            </div>

                    

<div id="vd_selector" class="tid mmy_index">
    <form id="mmy_droplist_form" name="mmy_form" action="" method="GET" class="mmy_index">
                <select class="mmy_index-make-dd" name="makes">
                    <option value="">Select vehicle make</option>
                </select>
                <select class="mmy_index-model-dd" name="models">
                    <option value="">All models</option>

                </select>
                <select class="mmy_index-year-dd" name="years">
                    <option value="">All years</option>
                </select>
        <button class="button blue droplist_submit small" id="droplist_submit" name="Go" value="Go"><span>Go</span></button>
    </form>
</div>

    <script type="text/javascript">
    EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/edmui.droplist-configurator-proto-no-yui.js');
    EDM.qLoader.defer(2, function() {
        var droplist = new EDMUNDS.DroplistConfiguratorProto();
        droplist.container = document.getElementById('mmy_droplist_form');
        droplist.jsonResults = {};
        droplist.wsUrl = '/api/vehicle-directory-ajax/findmakes?fmt=json&ps=all';


        droplist.droplistYearPopulator = function(jsonResults, opName, opValue, selectId, initOptions){
            var json = jsonResults;
            selectId.innerHTML ='';
            selectId.options[0] = new Option(initOptions.text, '');
            var k = 1;
            for (property in json) {//if object
                var opt = document.createElement('optgroup');
                opt.label = property;
                var count = json[property].length;
                for(var i=0; i < count; i++){
                    //make initial value selected
                    var option = document.createElement('OPTION');
                    option.value = json[property][i];
                    option.appendChild(document.createTextNode(json[property][i]));
                    opt.appendChild(option);
                }
                selectId.appendChild(opt);
            }
            selectId.selectedIndex = 1;
            selectId.removeAttribute("disabled");
            return selectId.innerHTML;//return for caching
        };
        /**
         *	Overwriting the default populator to handle preselected items as well as sub models
         *
         *	@param	jsonResults  json object
         *	@param	opName		 json key name for option display
         *	@param	opValue      json key name for option value
         *  @param  selectId     select element
         *  @param  initOptions  the initial droplist value (select vehicle model)
         *  @param  selectedItem value of preselected Item
         *	@return	cached html
         */
        droplist.droplistPopulator = function(jsonResults, opName, opValue, selectId, initOptions, selectedItem){
            var json = jsonResults;
            selectId.innerHTML ='';
            selectId.options[0] = new Option(initOptions.text, '');

            //selectId.innerHTML ='';
            var k = 1;
            for (property in json) {//if object
                if (json.hasOwnProperty(property)) {

                    if (selectId.name=="models") {
                        selectId.options[k] = new Option(json[property][opName],json[property][opValue]);
                        selectId.options[k].setAttribute("model", json[property]["modelname"]);
                        if (json[property]["submodel"]) {
                            selectId.options[k].setAttribute("sub", json[property]["submodel"]);
                        }
                    } else {
                        selectId.options[k] = new Option(json[property][opName],json[property][opValue]);
                    }

                    if(selectedItem && selectedItem != '' && selectedItem.toLowerCase() == json[property][opValue].toLowerCase()){
                        selectId.selectedIndex = k;
                    }
                    k++;
                }
            }
            if(selectId.options.length > 1 && json.length){//if array
                var count = json.length;
                selectId.options[0] = new Option(initOptions.text, '');
                var k = 1;
                for(var i=1; i < count; i++){
                    selectId.options[k] = new Option(json[i][opName],json[i][opValue]);
                    k++;
                }
            }

            selectId.removeAttribute("disabled");
            if(selectedItem !=''){//give it some time to trigger select change on preselected items
                setTimeout(function(){EDM.Core.Utils.dispatchEvent(selectId,'change');}, 100);
            }
            return selectId.innerHTML;//return for caching
        };
        droplist.init= function(initSelect){
            this.initSelect = initSelect || {};

            //store the form elements as vars
            this.make_droplist = this.container.makes;
            this.model_droplist = this.container.models;
            this.year_droplist = this.container.years;
            this.submit_button = this.container.querySelector('button.droplist_submit');


            //set prepopulated vars
            this.selectedModel = initSelect["models"];

            //disable droplists
            this.model_droplist.setAttribute("disabled","disabled");
            this.year_droplist.setAttribute("disabled","disabled");
            //turn off submit button
            this.submit_button.disabled = true;

            //store initial value in cache
            this.cache[this.make_droplist.name] = this.make_droplist[0];
            this.cache[this.model_droplist.name] = this.model_droplist[0];
            this.cache[this.year_droplist.name] = this.year_droplist[0];

            //attach listeners
            this.container.addEventListener("submit", this.onSubmit);
            this.submit_button.addEventListener("click", this.onSubmit);
            EDM.Core.EventUtils.addQuerySelectorListener('select', 'change', this.onChange, this.container);

            //create initial droplist specific to makes json result only if droplist not populated
            if(!this.make_droplist.options[1]){
                if(this.wsUrl){
                    obj = this;
                    EDM.Core.Ajax.Connection.get(this.wsUrl, {
                        success:function(o) {
                            if(o.responseText !== undefined){
                                var jsonList = JSON.parse(o.responseText);
                                var preselect = obj.initSelect["makes"];
                                delete obj.initSelect["makes"];
                                obj.droplistPopulator(jsonList.makes, 'name', 'name', obj.make_droplist, obj.cache[obj.make_droplist.name], preselect);
                            }
                        },
                        failure:function(o) {	}
                    });
                }else{
                    var jsonList = this.jsonResults.makes;
                    var preselect = this.initSelect["makes"];
                    delete this.initSelect["makes"];
                    this.droplistPopulator(jsonList, 'name', 'name', this.make_droplist, this.cache[this.make_droplist.name], preselect);
                }
            }
        };
        droplist.onChange= function(e){
            var target = e.target;
            switch(target.name){
                case "makes":
                    if(target.value){
                        var makeId = droplist.make_droplist.value;
                        //populate model droplist
                        if(droplist.cache[makeId]){
                            droplist.model_droplist.innerHTML = droplist.cache[makeId];
                            droplist.model_droplist.removeAttribute("disabled");
                        }else{
                            //populate year droplist
                            var sUrl = "/api/vehicle-directory-ajax/findmakemodels?make="+droplist.make_droplist.value+"&fmt=json&ps=all&yearFormat=expanded&excludepreprod";
                            //clear previous list
                            droplist.model_droplist.innerHTML = '';
                            droplist.model_droplist.options[0] = new Option(droplist.cache[droplist.model_droplist.name].text,'');

                            //verify all dependant droplists are reset and disabled
                            droplist.year_droplist.setAttribute("disabled","disabled");
                            droplist.year_droplist.innerHTML = '';
                            droplist.year_droplist.options[0] = new Option(droplist.cache[droplist.year_droplist.name].text,'');
                            //get json and update droplist
                            EDM.Core.Ajax.Connection.get(sUrl, {
                                success:function(o) {
                                    if(o.responseText !== undefined){
                                        //not the prettiest
                                        jsonList = JSON.parse(o.responseText);
                                        for (var sub in jsonList["models"]) {
                                            if (jsonList["models"].hasOwnProperty(sub)) {
                                                jsonList["models"][sub].id = sub;
                                            }
                                        }
                                        droplist.jsonResults = jsonList["models"]; //update jsonResults with model/year info
                                        droplist.jsonModelYearPersist = droplist.jsonModelYearPersist || {};
                                        droplist.jsonModelYearPersist[makeId] = jsonList["models"];
                                        var preselect = droplist.initSelect["models"];
                                        delete droplist.initSelect["models"];
                                        droplist.cache[makeId] = droplist.droplistPopulator(jsonList["models"], 'name', 'id', droplist.model_droplist, droplist.cache[droplist.model_droplist.name],preselect);
                                        return true;
                                    }
                                },
                                failure:function(o) {	}
                            });

                            droplist.submit_button.disabled = false;

                        }
                    }else{
                        //reset to initial state
                        droplist.model_droplist.setAttribute("disabled","disabled");
                        droplist.model_droplist.innerHTML='';
                        droplist.model_droplist.options[0] = new Option(droplist.cache[droplist.model_droplist.name].text,'');

                        //verify all dependant droplists are reset and disabled
                        droplist.year_droplist.setAttribute("disabled","disabled");
                        droplist.year_droplist.innerHTML = '';
                        droplist.year_droplist.options[0] = new Option(droplist.cache[droplist.year_droplist.name].text,'');
                        //make sure button is disabled if no make is selected
                        droplist.submit_button.disabled = true;
                    }
                    break;
                case "models":
                    if(target.value){
                        var modelId = target.value; //get modelId
                        //populate model droplist
                        if(droplist.cache[modelId]){
                            droplist.year_droplist.innerHTML = droplist.cache[modelId];
                            droplist.year_droplist.removeAttribute("disabled");
                        }else{
                            var makeId = droplist.make_droplist.value;
                            var jsonList = droplist.jsonModelYearPersist[makeId][modelId].years;
                            droplist.cache[modelId] = droplist.droplistYearPopulator(jsonList, null, null, droplist.year_droplist, droplist.year_droplist.options[0]);
                        }
                    }else{
                        //verify all dependant droplists are reset and disabled
                        droplist.year_droplist.setAttribute("disabled","disabled");
                        droplist.year_droplist.innerHTML = '';
                        droplist.year_droplist.options[0] = new Option(droplist.cache[droplist.year_droplist.name].text,'');
                        //make sure button is disabled if no make is selected
                        droplist.submit_button.disabled = false;
                    }
                    break;
            }
        };

        droplist.onSubmit= function(e){
            EDM.Core.EventUtils.stop(e);

            if (!droplist.make_droplist.value || !droplist.model_droplist.value || !droplist.year_droplist.value) {
                return false;
            }
            var make =  droplist.make_droplist.value.toLowerCase() || "";
            var model = droplist.model_droplist.options[droplist.model_droplist.selectedIndex].getAttribute("model").toLowerCase().replace(/ /g, '-');
            var submodel = droplist.model_droplist.options[droplist.model_droplist.selectedIndex].getAttribute("sub").toLowerCase();
            var year = droplist.year_droplist.value;
            var page_state = droplist.year_droplist.options[droplist.year_droplist.selectedIndex].parentNode.label.toLowerCase();
            if(page_state  === 'used'){
                var url =  EDM.Core.VehicleUrlHelper.getUrlForVehicle({"make": make , "model": model , "year":year , "submodel": submodel, "ps":'used'  }, null, null, false, false);
            }else{
                var url =  EDM.Core.VehicleUrlHelper.getUrlForVehicle({"make": make , "model": model , "year":year , "submodel": submodel },null , null, false, false);
            }
            location.href = url.toLowerCase().replace(/ /g, '-');
        };


        droplist.init( { "makes":"bmw", "models":"x5-m:suv", "years":"" } );

    });
    </script>                    

        </div>
    </div>


            
            

   
    
<div id="my-medium-rectangle-ad-1-container"
     class="container  
          gutter-vertical-4
     snarcy-ad tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="my-medium-rectangle-ad-1-container-anchor" id="my-medium-rectangle-ad-1-container-anchor"></span>
    <div class="content">
            









    <div class="medium-rectangle  with-title">
            <span>ADVERTISEMENT</span>
        <div id="my-medium-rectangle-ad1">
        <script>
                            EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                    var $U = EDM.UDMSegment.AolBid;
                    if(EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)){
                        var v = {
                        "auorder":"2",
                            "adType":"async-gpt-sra",
                            "adName":"mrect",
                            "sizes":[[300,1050],[300,600],[300,250],[160,600],[1,1]],
                            "position":"1",
                            "category":"medium-rectangle,",
                            "customTargeting":""
                        };
                        var fn = function(){
                            EDM.Ads.Factory.constructAdUnit(v).render('my-medium-rectangle-ad1');
                        }
                        if ($U && $U.mode == "std" && $U.render) {
                            $U.render(v.adName+ v.position, fn)
                        } else {
                            fn()
                        }
                    }

})});

        </script>
        </div>
    </div>


            

    </div>

</div>

            
            

   
    
<div id="my-medium-rectangle-ad-2-container"
     class="container  
          gutter-vertical-4
     snarcy-ad tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="my-medium-rectangle-ad-2-container-anchor" id="my-medium-rectangle-ad-2-container-anchor"></span>
    <div class="content">
            









    <div class="medium-rectangle  with-title">
            <span>ADVERTISEMENT</span>
        <div id="my-medium-rectangle-ad2">
        <script>
                            EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                    var $U = EDM.UDMSegment.AolBid;
                    if(EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)){
                        var v = {
                        "auorder":"3",
                            "adType":"async-gpt-sra",
                            "adName":"mrect",
                            "sizes":[[300,1050],[300,600],[300,250],[160,600],[1,1]],
                            "position":"2",
                            "category":"medium-rectangle,",
                            "customTargeting":""
                        };
                        var fn = function(){
                            EDM.Ads.Factory.constructAdUnit(v).render('my-medium-rectangle-ad2');
                        }
                        if ($U && $U.mode == "std" && $U.render) {
                            $U.render(v.adName+ v.position, fn)
                        } else {
                            fn()
                        }
                    }

})});

        </script>
        </div>
    </div>


            

    </div>

</div>

            

    </div>

</div>

            

    </div>

</div>



   
    
<div id="sub-page-2"
     class="container   grid-216
          gutter-vertical-2
      tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="sub-page-2-anchor" id="sub-page-2-anchor"></span>
    <div class="content grid-216">
            

   
    
<div id="leaderboard-ad2-container"
     class="container   grid-216
          gutter-vertical-2
     no-gutter-bottom tid" 
    
 
 

    >
    

   
    <span class="pod-anchor " name="leaderboard-ad2-container-anchor" id="leaderboard-ad2-container-anchor"></span>
    <div class="content grid-216">
            






        <div class="span-24 leaderboard wide-title  snarcy-ad with-title">
                <span>ADVERTISEMENT</span>
            <div id="leaderboard-ad2">
                <script type="text/javascript">
                    EDM.qLoader.defer('nowait', function(){EDM.Ads.Factory.pushToAdsArray(function(){
                        var $U = EDM.UDMSegment.AolBid;
                        if(EDM.Core.PackageUtils.exists('EDM.Ads', 1.0)){
                            var adSizes = [[728,90],[1,1]];


                                var adContainer = document.querySelector("#leaderboard-ad2");
                                if(EDM.Ads.Leaderboard && EDM.Ads.Leaderboard.getBillboardAdSizes){
                                    adSizes = EDM.Ads.Leaderboard.getBillboardAdSizes(adContainer, adSizes);
                                }

                            var v = {
                                "auorder":"4",
                                "adType": "async-gpt-sra",
                                "adName":"leaderc",
                                "sizes": adSizes, //adSizes,  -- use JS var when using implementation above
                                "position":"2",
                                "category":"leaderboard,",
                                "tabDependency":"",
                                "customTargeting":""
                            };
                            var fn = function(){
                                EDM.Ads.Factory.constructAdUnit(v).render('leaderboard-ad2');
                            }
                            if ($U && $U.mode == "std" && $U.render) {
                                $U.render(v.adName+ v.position, fn)
                            } else {
                                fn()
                            }
                        }

})});
                </script>
            </div>
        </div>

            

    </div>

</div>

            

    </div>

</div>

<!--END - /edmunds/sites/vehicledirectory/main/src/main/webapp/WEB-INF/freemarker/vehicledirectory/templates/model.ftl-->
</div>

    <div id="edm_footer" class="grid-216 tid">

<div id="footer_nav_ppr">

        <div id="footer_nav_links_global">


                    <ul id="new_cars_footer_nav" class="list_of_items">
                        <li>
                            <a class="first" href="/new-cars/">New Cars</a>
                        </li>
                                <li>
                                    <a href="/calculators/">Calculators</a>
                                </li>
                                <li>
                                    <a href="/finder/car-finder-results.html">Car Finder</a>
                                </li>
                                <li>
                                    <a href="/car-comparisons/">Compare Cars</a>
                                </li>
                                <li>
                                    <a href="/dealerships/">Find a Dealer</a>
                                </li>
                                <li>
                                    <a href="/calculators/simplified-pricing.html">Get Monthly Payment</a>
                                </li>
                                <li>
                                    <a href="/car-incentives/">Incentives & Rebates</a>
                                </li>
                                <li>
                                    <a href="/tco.html">True Cost to Own<sup>&reg;</sup></a>
                                </li>
                    </ul>


                    <ul id="used_cars_footer_nav" class="list_of_items">
                        <li>
                            <a class="first" href="/used-cars/">Used Cars</a>
                        </li>
                                <li>
                                    <a href="/appraisal/">Appraise Your Car</a>
                                </li>
                                <li>
                                    <a href="/certified-cars/">Certified Cars</a>
                                </li>
                                <li>
                                    <a href="/sell-car/">Selling Tips</a>
                                </li>
                                <li>
                                    <a href="/tco.html">True Cost to Own<sup>&reg;</sup></a>
                                </li>
                    </ul>


                    <ul id="car_reviews_footer_nav" class="last_ul">
                        <li>
                            <a class="first" href="/car-reviews/">Car Research</a>
                        </li>
                                <li>
                                    <a href="/whats-hot/" class="whats_hot">What's Hot</a>
                                </li>
                                <li>
                                    <a href="/car-reviews/car-reviews-road-tests.html">Car Reviews and Road Tests</a>
                                </li>
                                <li>
                                    <a href="/cars/">Tips & Advice</a>
                                </li>
                                <li>
                                    <a href="/car-reviews/long-term-road-tests/">Long-Term Road Tests</a>
                                </li>
                                <li>
                                    <a href="/car-videos/">Car Videos</a>
                                </li>
                                <li>
                                    <a href="/dealer-reviews/">Dealer Ratings and Reviews</a>
                                </li>
                                <li>
                                    <a href="/car-maintenance/">Maintenance</a>
                                </li>
                    </ul>


















        </div> <!-- end #footer_nav_links -->

        <script>
            
                /*EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/newsletter-email.js');*/

                EDM.qLoader.defer(100, function(){
                    if(EDM.Newsletter){
                         var widget = EDM.Newsletter.Primer;
                         widget.execute();
                    }
                });

        </script>
        <div class="border_div"></div>
        <div id="newsletter_overlay"></div>
        <div class="email_full_width email_section">
            <div class="email_sign_up">
                <div class="email_newsletter_start" id="email_newsletter">
                    <div class="input_start" id="input_holder">
                        <span class="email_input_holder"><input type="email" name="email" placeholder="Email Address" id="email_address" class="email_addy"></span>
                        <div class="email_submit_button" id="email_submit">Sign Up</div>
                        <div class="email_error" id="email_error_newsletter"></div>
                    </div>
                    <div class="email_desc1"> Sign Up To Receive Emails from Edmunds</div>
                    <div class="email_desc3"> Get the latest deals, car buying tips and auto news sent straight to your inbox!</div>
                </div>
            </div>
        </div>

								<div class="border_div"></div>



    <div id="footer_nav_most_visited" class="footer-hp-center">

        <div id="most_visited_div"><span class="most_visited">Most Visited Makes</span></div>









                <ul class="list_of_items">
                        <li>
                            <a href="/toyota/">Toyota</a>
                        </li>
                        <li>
                            <a href="/ford/">Ford</a>
                        </li>
                        <li>
                            <a href="/honda/">Honda</a>
                        </li>
                        <li>
                            <a href="/chevrolet/">Chevrolet</a>
                        </li>
                        <li>
                            <a href="/nissan/">Nissan</a>
                        </li>
                        <li>
                            <a href="/bmw/">BMW</a>
                        </li>
                </ul>


                <ul class="list_of_items">
                        <li>
                            <a href="/mazda/">Mazda</a>
                        </li>
                        <li>
                            <a href="/hyundai/">Hyundai</a>
                        </li>
                        <li>
                            <a href="/mercedes-benz/">Mercedes-Benz</a>
                        </li>
                        <li>
                            <a href="/volkswagen/">Volkswagen</a>
                        </li>
                        <li>
                            <a href="/audi/">Audi</a>
                        </li>
                        <li>
                            <a href="/lexus/">Lexus</a>
                        </li>
                </ul>


                <ul class="list_of_items">
                        <li>
                            <a href="/dodge/">Dodge</a>
                        </li>
                        <li>
                            <a href="/jeep/">Jeep</a>
                        </li>
                        <li>
                            <a href="/subaru/">Subaru</a>
                        </li>
                        <li>
                            <a href="/acura/">Acura</a>
                        </li>
                        <li>
                            <a href="/kia/">Kia</a>
                        </li>
                        <li>
                            <a href="/infiniti/">Infiniti</a>
                        </li>
                </ul>


                <ul class="list_of_items">
                        <li>
                            <a href="/gmc/">GMC</a>
                        </li>
                        <li>
                            <a href="/cadillac/">Cadillac</a>
                        </li>
                        <li>
                            <a href="/chrysler/">Chrysler</a>
                        </li>
                        <li>
                            <a href="/volvo/">Volvo</a>
                        </li>
                        <li>
                            <a href="/mitsubishi/">Mitsubishi</a>
                        </li>
                        <li>
                            <a href="/buick/">Buick</a>
                        </li>
                </ul>


                <ul class="list_of_items">
                        <li>
                            <a href="/porsche/">Porsche</a>
                        </li>
                        <li>
                            <a href="/land-rover/">Land Rover</a>
                        </li>
                        <li>
                            <a href="/lincoln/">Lincoln</a>
                        </li>
                        <li>
                            <a href="/jaguar/">Jaguar</a>
                        </li>
                        <li>
                            <a href="/scion/">Scion</a>
                        </li>
                        <li>
                            <a href="/mini/">Mini</a>
                        </li>
                </ul>


                <ul class="last_ul">
                        <li>
                            <a href="/tesla/">Tesla</a>
                        </li>
                        <li>
                            <a href="/suzuki/">Suzuki</a>
                        </li>
                        <li>
                            <a href="/ram/">Ram</a>
                        </li>
                        <li>
                            <a href="/fiat/">Fiat</a>
                        </li>
                        <li>
                            <a href="/smart/">SMART</a>
                        </li>
                </ul>






    </div>



    <div class="border_div"></div>

        <p class="links first" id="footer_links_first">



                <a  href="https://help.edmunds.com/hc/en-us"> Help</a><b> | </b>



                <a  href="/about/"> About Us</a><b> | </b>



                <a  href="https://help.edmunds.com/hc/en-us/requests/new"> Contact Us</a><b> | </b>



                <a  href="/about/jobs/"> Careers</a><b> | </b>



                <a  href="/about/affiliate-program.html"> Affiliate Program</a><b> | </b>



                <a  href="/dealers/"> Dealer Center</a><b> | </b>



                <a  href="/about/privacy.html"> Privacy Statement</a><b> | </b>



                <a  href="/about/visitor-agreement.html"> Visitor Agreement</a><b> | </b>



                <a  href="/about/membership-agreement.html"> Membership Agreement</a>
        </p>

        <p class="links" style="border: none">
                <a href="/about/privacy.html#adsonthirdpartysites" >Your Ad Choices</a>
                <b>|</b> <a href="/about/sitemap.html" >Site Map</a>
                <b>|</b> <a href="/glossary/" >Glossary</a>
                <b>|</b> <a href="/mobile/featured.html" >Mobile</a>
                <b>|</b> <a href="http://developer.edmunds.com/" >Developers</a>
        </p>


    <p class="follow-edmunds">
        Follow Edmunds
    </p>

 		<p class="follow-footer-outer">
			<span class="follow-footer-ppr" style="display:block">
				<a target="_blank" href="//www.facebook.com/edmunds" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/facebook-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//plus.google.com/+edmunds/" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/google-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//www.pinterest.com/edmundsinc/" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/pinterest-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//www.linkedin.com/company/edmunds-com" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/linkedin-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="http://tumblr.edmunds.com/" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/tumblr-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//twitter.com/edmunds" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/twitter-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//www.youtube.com/user/edmundsvideo" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/youtube-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//instagram.com/edmundsdotcom" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/instagram-32x32.png" data-dfallback="" ></a>
				<a target="_blank" href="//www.edmunds.com/rss.html" class=""><img data-dsrc="//static.ed.edmunds-media.com/unversioned/img/newsletter/rss-32x32.png" data-dfallback="" ></a>
			</span>
		</p>

        <p class="copy">
        &copy; Edmunds.com, Inc.
        </p>

</div>
        <script>
                    EDM.qLoader.defer("scroll", "edm_footer", function(yPos){
            PAGESETUP.scope.localETrack.retrack({}, "visible", {
                "name" : "edm_footer",
                "scrollHeight" : window.scrollY,
                "yPos" : yPos
            });
        });

        </script>



<!-- #footer_nav_ppr -->
</div>
</div>

    

        <script>
                    (function() {
            var fn = function() {
                if(EDM.Core.PackageUtils.exists('EDM.Ads.InitialStatePrimer')) {
                    EDM.Ads.InitialStatePrimer.execute(100);
                }
            };

            if(window.googletag) {
                window.googletag.cmd.push(fn);
            } else {
                fn();
            }
        })();

        </script>
    
    
<script type="text/javascript">
    EDM.qLoader.defer('low', function() {
        var contentTargeting = EDM.Core.Cookie.get('content-targeting');
        var deviceCharacterization = EDM.Core.Cookie.get('device-characterization');

        if(deviceCharacterization && contentTargeting){
            if(contentTargeting.indexOf(', ') !== -1 && deviceCharacterization.indexOf(', ') !== -1){
                contentTargeting = contentTargeting.split(', ');
                deviceCharacterization = deviceCharacterization.split(', ');

                var data =  {
                    'device':deviceCharacterization[0],
                    'zip':contentTargeting[6],
                    'dma':contentTargeting[3],
                    'country':contentTargeting[0],
                    'city':contentTargeting[2]
                };

                edw_tracking.track('akamai-content-test', data);
                                EDM.Core.Tracking.GATracking._trackEvent('GEO_DEVICE_ACCURACY', 'akamai_edm_device', deviceCharacterization[0] + '|WIRED');
                EDM.Core.Tracking.GATracking._trackEvent('GEO_DEVICE_ACCURACY', 'akamai_edm_zip_code', contentTargeting[6] + '|' + edw_tracking.get("edwzipck"));
                EDM.Core.Tracking.GATracking._trackEvent('GEO_DEVICE_ACCURACY', 'akamai_edm_dma', contentTargeting[3] + '|' + EDMUNDS.Cookie.getSub("EdmundsYear", "dma"));
                EDM.Core.Tracking.GATracking._trackEvent('GEO_DEVICE_ACCURACY', 'akamai_edm_country', contentTargeting[0] + '|' + 'N/A');
                EDM.Core.Tracking.GATracking._trackEvent('GEO_DEVICE_ACCURACY', 'akamai_edm_city', contentTargeting[2] + '|' + EDMUNDS.Cookie.getSub("EdmundsYear","city"));
            }
        }
    });
</script>    
    
<script type="text/javascript">
    (function(){
        var st = document.createElement('script');
        st.type = 'text/javascript';
        st.async = true;
        st.src = '/api/wtf/v2/activate?proceedSem=true&make='+EDM.PageValues.vehicle.make+'&model='+EDM.PageValues.vehicle.model+'&pageName='+EDM.PageValues.page.name+'&useIn='+EDM.PageValues.vehicle.useIn+'&siteType='+EDM.PageValues.page.cmsPlatform+'&refUrl=' + document.referrer;
        (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(st);
    })();
</script>
    
    

        <script>
                EDM.qLoader.defer(1000, function(){
        if(EDM.Core.PackageUtils.exists('EDM.PageValuesPrimer')){
            EDM.PageValuesPrimer.execute();
        }
    });

        </script>
    
    

        <script>
                        EDM.qLoader.defer(1000, function(){
                if(EDM.Core.PackageUtils.exists('EDM.Core.RequestParameters')){
                    EDM.Core.RequestParameters.init({"category":"suv","model":"x5-m","make":"bmw"});
                }
            });

        </script>
    
    
        <script type="text/javascript">
            EDM.qLoader.deferAboveFold(1039, function(){
                if(EDM.Core.PackageUtils.exists('EDM.Core.Vehicle')){
                    var vehicle = {
                        'make' : 'bmw',
                        'model' : 'x5-m',
                        'year' : '',
                        'submodel' : 'x5m suv',
                        'styleId' : ''
                    }
                    EDM.Core.Vehicle.Primer.execute(vehicle);
                }
            });
        </script>
    
    

        <script>
                    EDM.qLoader.deferAboveFold(1039, function(){
            if(EDM.Core.PackageUtils.exists('EDM.Core.Visitor')){
                EDM.Core.Visitor.Primer.execute();
            }
        });

        </script>
    
    
    
    
    
    




<script>

  EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/help-widget.js');

    EDM.qLoader.defer("normal", function() {
        EDM.zEWidget.Primer.execute("zen-desk", {});
    });

</script>    
    

        <script>
                EDM.qLoader.defer('100', function(){
        if(EDM.Core.PackageUtils.exists('EDM.Image')){
            EDM.Image.DeferredServicePrimer.execute();
        }
    });

        </script>
        <script>
                                EDM.qLoader.defer(1, function(){
                        if(EDM.Core.PackageUtils.exists('EDM.Page')){
                            var services = ["EDM.Image.DeferredServicePrimer"];
                            EDM.Page.Service.registerOnDeferredServices(services);
                        }
                    });

        </script>
    
    

        <script>
                EDM.qLoader.defer('100', function(){
        if(EDM.Core.PackageUtils.exists('EDM.Video')){
            EDM.Video.BrightcoveDeferredPrimer.execute();
        }
    });

        </script>
        <script>
                                EDM.qLoader.defer(1, function(){
                        if(EDM.Core.PackageUtils.exists('EDM.Page')){
                            var services = ["EDM.Video.BrightcoveDeferredPrimer"];
                            EDM.Page.Service.registerOnDeferredServices(services);
                        }
                    });

        </script>
    
    

        <script>
                    EDM.qLoader.defer(800, function () {
            if (EDM.Core.PackageUtils.exists('EDM.Canonical')) {
                EDM.Canonical.CanonicalPrimer.execute();
            }
        });

        </script>

    
    

        <script>
                    EDM.qLoader.defer(100, function () {
            if(EDM.Core.ObjectUtils.exists('EDM.Panel.LegacyShimPrimer')){
                EDM.Panel.LegacyShimPrimer.execute();
            }
        });

        </script>
    
    

        <script>
                EDM.qLoader.defer(500, function(){
        if(EDM.Core.PackageUtils.exists('EDM.CMS.Defer')){
            EDM.CMS.Defer.CMSEntryPrimer.execute();
        }
    });

        </script>
        <script>
                                EDM.qLoader.defer(1, function(){
                        if(EDM.Core.PackageUtils.exists('EDM.Page')){
                            var services = ["EDM.CMS.Defer.CMSEntryPrimer"];
                            EDM.Page.Service.registerOnDeferredServices(services);
                        }
                    });

        </script>
    
    

        <script>
                    EDM.qLoader.defer(1, function () {
            if (EDM.Core.PackageUtils.exists('EDM.Panel.Primer')) {
                EDM.Panel.Primer.execute();
            }
        });

        </script>
    
    
    
    
    
    
    
    

        <script>
                EDM.qLoader.defer(1, function() {
        if(EDM.Core.PackageUtils.exists('EDM.Demographics')) {
            EDM.Demographics.TargusInfo = EDM.Demographics.TargusInfo || {};
            EDM.Demographics.TargusInfo.enabled = false;

            EDM.Demographics.Primer.execute();
        }
    });

        </script>
    
    

    

        <script>
                    EDM.qLoader.defer(8, function(){
            if(EDM.Core.ObjectUtils.exists('EDM.Propensity.Visitor')){
                EDM.Propensity.Visitor.init(function() {
                    EDM.Propensity.Visitor.updateVehicle();
                    EDM.Propensity.Visitor.updatePageView();
                });
            }
        });

        EDM.qLoader.defer(7, function(){
                if(EDM.Core.ObjectUtils.exists('EDM.Propensity.UPS.Primer')){
                    EDM.Propensity.UPS.Primer.execute({});
                }
        });

        </script>
    

    
    

        <script>
                EDM.qLoader.defer(9, function() {
        if(window.EDM && EDM.Core && EDM.Core.PackageUtils && EDM.Core.PackageUtils.exists('EDM.Core.Tracking.GATracking')){
            EDM.Core.Tracking.GATracking.install();
        }

        if(window.EDM && EDM.Core && EDM.Core.PackageUtils && EDM.Core.PackageUtils.exists('EDM.Core.Tracking.KruxTracking')) {

            EDM.KRUX.inventory = {};
            EDM.KRUX.inventory.bannerCode = (typeof document.getElementsByName("banner_code")[0] != 'undefined') ? document.getElementsByName("banner_code")[0].value : "";

            EDM.KRUX.visitor = {
              visitorId : EDM.Core.Cookie.get('edmunds'),
              sessionId : EDM.Core.Cookie.get('edw'),
              location : {
                zip : EDM.Core.Cookie.getAsMap('EdmundsYear').zip
              }
            };

            EDM.Core.Tracking.KruxTracking.install('JY8uWuIk');

           

            EDM.KRUX.GA = {
              version: '0.0.2',
              page : { name : EDM.KRUX.page ? EDM.KRUX.page.name : null },
              visitor : {
                location : { zip : EDM.KRUX.visitor.location.zip }
              },
              vehicle : EDM.KRUX.vehicle ? EDM.KRUX.vehicle : null,
              data : { }
            };

            EDM.Core.Logger.log('EDM KRUX GA', EDM.KRUX.GA.version);

            var cohortCookies = EDM.Core.Cookie.getMatchingCookies(/^edm-cohort-\d/),
                campaignCookies = EDM.Core.Cookie.getMatchingCookies(/^edm-routes-\d/),
                cohort,
                campaign;

            if(cohortCookies && cohortCookies.length > 0){
                cohort = cohortCookies[0].value.replace(/"/g, "");
            }
            if(campaignCookies && campaignCookies.length > 0){
                campaign = campaignCookies[0].value.replace(/"/g, "");
            }
            if(cohort && campaign){
                EDM.KRUX.GA.AB = {
                  cohort : cohort,
                  campaign : campaign
                };
            }

            if(ETRACKBASE.eventQueue && ETRACKBASE.eventQueue.subscribe){
                ETRACKBASE.eventQueue.subscribe(
                    function(event){
                        var data = event.getData(),
                            params = event.getParams();

                        if (EDM.KRUX.log) {
                          console.log('type:  ', event.getType());
                          console.log('data:  ', event.getData());
                          console.log('params:', event.getParams());
                        }

                        if ((typeof data === 'object' && parseInt(data.pageload, 10) === 1) || (typeof data === 'string' && data.indexOf('pageload|1') >= 0)) {
                            if (params.edwpg) {
                                EDM.KRUX.GA.page.name = params.edwpg;
                            }
                            EDM.KRUX.GA.data = {};
                            for (var i in params) {
                                if (params.hasOwnProperty(i)) {
                                    EDM.KRUX.GA.data[i] = params[i];
                                }
                            }
                            if (EDM.KRUX.CP && EDM.KRUX.CP.onPageLoad) {
                                EDM.KRUX.CP.onPageLoad();
                            } else {
                                EDM.Core.Logger.log('no page load available');
                            }
                        }
                    }
                );
           }
      }
    });

        </script>
    
    
    
    

        <script>
                    EDM.qLoader.defer("normal", function () {
            if (EDM.UDMSegment && EDM.UDMSegment.Service2 && EDM.UDMSegment.enableService2) {
                EDM.UDMSegment.Service2.init();
            }
            if (window.sessionStorage &&
                window.sessionStorage.getItem("udmSegment") == null &&
                EDM.UDMSegment.RemoteService) {
                EDM.UDMSegment.Service.setRepository(EDM.UDMSegment.RemoteService, function() {
                    try {
                        window.sessionStorage.setItem("udmSegment", true);
                    } catch(e) {
                        EDM.UDMSegment.Tracker.addDataPoint("sessionStorageError","Not Available");
                    }
                });
            }
            EDM.UDMSegment.Tracker.track();
        });

        </script>
    
    

        <script>
                EDM.qLoader.defer('low', function () {
        if (EDM.Widget.BrowserCheck && EDM.Widget.BrowserCheck.Primer) {
            EDM.Widget.BrowserCheck.Primer.execute();
        }
    });

        </script>
    
    
    
    
    
    


    
    

    
    
    
    

    
    








    <script type="text/javascript">
        EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/sentiment-widget.js');
    </script>

<div id="sentiment-widget-sidebar" class="sentiment-widget sentiment_widget sentiment-widget-sidebar sidebar
initial-state">
    <div class="rating-widget">
        <p> Rate This Page</p>
        <a href="javascript:void(0);" class="rate-positive"><span>Good</span></a>
        <a href="javascript:void(0);" class="rate-neutral"><span>Neutral</span></a>
        <a href="javascript:void(0);" class="rate-negative"><span>Bad</span></a>
    </div>
    <div class="feedback-container">
        <div class="feedback-form">
            <p class="question">Tell us what you think.</p>
            <div class = "feedback-comment">
                <textarea class="empty" autocomplete="off" maxlength="150" style="height: 130px">Anything else you'd like to add? We're listening.</textarea>
                <p class="char-counter"><span class="count">150</span> remaining</p>
            </div>
            <button class="feedback-submit button disabled" id="submit-button"><span>Submit</span></button>
            <p class="cancel-button"><a href="javascript:void(0);" id="cancel_feedback"><span>Cancel</span></a></p>

            <div class="live-advice-callout"><p>
                Also, you can reach us at Edmunds Live Advice.
                Just call 1-855-782-4711, Mon-Fri 9am to 5pm.
            </p></div>
        </div>

        <div class="contact-form">
            <p>Anything else you'd like to add? We're listening.</p>

            <input class="empty" type="text" value="Email Address" autocomplete="off"/>

            <a href="javascript:void(0);" class="contact-yes button medium green"><span>Contact Me</span></a>
            <a href="javascript:void(0);" class="contact-no button medium grey"><span>No Thanks</span></a>
        </div>

        <div class="feedback-message">
            <p>Thank you for helping us improve our site!</p>
            <p id="submitted-button"><span>Submitted</span></p>
        </div>
    </div>
</div>
<script type="text/javascript">

    var container = document.getElementById('sentiment-widget-sidebar');
    var positiveButton = container.querySelector('.rate-positive');
    var neutralButton = container.querySelector('.rate-neutral');
    var negativeButton = container.querySelector('.rate-negative');
    var cancelButton = document.getElementById('cancel_feedback');
    var feedbackSubmitButton = container.querySelector('.feedback-submit');
    var feedbackForm = container.querySelector('.feedback-form');
    var feedbackContainer = container.querySelector('.feedback-container');
    var chosenOption = false;

    var getScrollTop = function (){
        var getscrolltop = window.pageYOffset || document.documentElement.scrollTop;
        return getscrolltop;
    };

    var getWindowWidth = function(){
        var windowWidth = window.innerWidth || document.documentElement.clientWidth;
        return windowWidth;
    };

    var wideEnough = function () {
        var windowWidth = getWindowWidth();
        var wideEnough = windowWidth >= 1410;
        return wideEnough;
    };

    var optionChosen = function(){
        if(!chosenOption){
            container.style.right = "0px";
            container.style.display = "table-cell";
            feedbackContainer.style.display = "inline-block";
            chosenOption = true;
        }
    };

    var cancelFeedback = function(){
        feedbackForm.style.display = "none";
        container.style.right = "0px";
        feedbackContainer.style.display = "none";
    };

    var returnToSide = function(){
        setTimeout(function(){
            cancelFeedback();
        },1500);
    };

    var renderWidget = function(){
        var scroll = getScrollTop(),
            windowHeight = window.innerHeight || document.documentElement.clientHeight;
        var windowWideEnough = wideEnough();
        if(windowWideEnough){
            if(scroll >= windowHeight-200){
                container.style.top =  "200px";
                container.style.display = "table-cell";
            }
            else{
                container.style.top = (windowHeight - scroll) + "px";
                container.style.display = "table-cell";
            }
        }
        else{
            container.style.display = "none";
        }


    };

    var updateWidget = function(){
        var windowWideEnough = wideEnough();
        if(windowWideEnough){
            container.style.display = "table-cell";
        }
        else{
            container.style.display = "none";
        }
        if(feedbackContainer.style.display == "none"){
            container.style.right = "0px";
        }
        else{
            container.style.right = "0px";
        }
    };

    positiveButton.addEventListener('click', optionChosen, false);
    neutralButton.addEventListener('click', optionChosen, false);
    negativeButton.addEventListener('click', optionChosen, false);
    cancelButton.addEventListener('click', cancelFeedback, false);
    feedbackSubmitButton.addEventListener('click', returnToSide, false);
    window.addEventListener('scroll', renderWidget, false);
    window.addEventListener('resize', updateWidget, false);

</script>
        <script type="text/javascript">
    EDM.qLoader.defer(100, function() {
            var model = new EDM.Widget.SentimentWidget.Model();
            model.container = 'sentiment_widget';
            model.mode = 'emoticon';
            model.questionId = 'universal_sentiment_widget';
            model.requireSubmitButton = false;
            model.commentEnabled = true;
            model.maxCommentLength = 150;
            model.commentHeight = 190;
            model.commentExpandSpeed = 30;
            model.zendeskEnabled = false;
            model.edw = edw_tracking;
            model.trackingAttributes = '';
            model.trackingData = {};




            EDM.Widget.SentimentWidget.Primer.execute(model);
    });
        </script>
    
    
    
    
    
    
    
    
<link rel="stylesheet" href="//static.ed.edmunds-media.com/unversioned/ng/fonts/ngc-v1/icomoon.css" type="text/css" media="all"/>
<style type="text/css">
    /* PR-218: Price Alert */
    #edm_header #price_alert {
        display: none;
        color: #00aafd;
        cursor: pointer;
        position: relative;
    }
    body.legacy #edm_header.showPriceAlert #help_item,
    #edm_header.showPriceAlert #help_item {
        display: none;
    }

    #edm_header.showPriceAlert #price_alert {
        display: block;
    }

    #edm_header #price_alert .text {
        color: #000;
        display: block;
        position: relative;
        line-height: 20px;
    }

    #price_alert .icon-bell2 {
        position: relative;
        font-size: 20px;
        margin-top: 8px;
        display: block;
    }

    #price_alert .icon > .count {
        background-color: #ff0000;
        border-radius: 7px;
        color: #fff;
        display: block;
        font-family: sans-serif;
        font-size: 13px;
        font-weight: bold;
        line-height: 5px;
        padding: 5px;
        position: absolute;
        right: 10px;
        top: 0;
    }

    .price-alert-box {
        display: none;
        position: absolute;
        top: 65px;
        right: -20px;
        z-index: 1000000;
        width: 250px;
        border-radius: 5px;
        padding: 10px 15px;
        background: rgba(0, 0, 0, 0.8);
        transition: 0.5s linear opacity;
        opacity: 0;
        text-align: left;
    }

    .price-alert-box:before {
        content: "";
        display: block;
        position: absolute;
        top: -15px;
        width: 0;
        height: 0;
        border-left: 15px solid transparent;
        border-right: 15px solid transparent;
        border-bottom: 15px solid black;
        right: 32px;
        opacity: 0.8;
    }

    .price-alert-box.display {
        display: block;
    }

    .price-alert-box.fadeIn {
        opacity: 1;
    }

    .price-alert-box .heading {
        color: #58a200;
        font-size: 16px;
        line-height: 16px;
        margin-top: 5px;
    }

    .price-alert-box .message {
        color: #FFF;
        font-size: 12px;
        line-height: 18px;
        margin-top: 15px;
    }

    .price-alert-box .message .vehicle {
        text-transform: uppercase;
    }
    .price-alert-box .message .count {
        display: inline;
        float: none;
    }

    #price_alert .icon-close {
        background: none;
    }

    .price-alert-box form {
        text-align: center;
        line-height: 25px;
    }

    .price-alert-box input {
        width: 100%;
        margin-top: 15px;
        height: 25px;
        padding: 5px;
        box-sizing: border-box;
        font-size: 13px;
        border-radius: 2px;
        border: 0;
    }

    .price-alert-box .close {
        cursor: pointer;
        color: #FFF;
        position: absolute;
        right: 10px;
    }

    .price-alert-box button {
        margin: 5px 0;
        width: 100%;
        margin-top: 15px;
    }

</style>
<div class="price-alert-box">
    <div class="close icon-close"></div>
    <div class="body">
        <div class="heading">Price Drop Alert</div>
        <p class="message">
            We found <span class="count"></span> <span class="vehicle"></span> that have recently dropped in price.
            Sign up to see this price drop and to receive future price drop notifications.
        </p>

        <form>
            <input type="text" name="name" pattern="^\s?(\w+\s).+" required="true" placeholder="Full Name">
            <input type="email" name="email" required="true" placeholder="Email Address">
            <button class="button medium" type="submit">Sign Up</button>
        </form>
    </div>
</div>
<script type="text/javascript">
    EDM.qLoader.push('//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/intelligent-messaging.js');
    EDM.qLoader.defer('1', function () {
        EDM.PriceAlertBox = new function () {
            var $C = EDM.Core.Cache.Factory;
            var $IM = EDM.IntelligentMessaging.Service2;
            var $V = EDM.Core.Vehicle.Service;
            var $AJAX = EDM.Core.Ajax.Connection;
            var $M = EDM.Core.MacroUtils;
            var $JSON = window.JSON;
            var REST = '/api/im-price-drop-inventory/v1/find/{zip}/{make}/{model}';

            var SESSION_CACHE_KEY = 'price-alert';
            var SESSION_CACHE_KEY_COUNTER = 'price-alert-counter';
            var cache = $C.getCache($C.CACHE_TYPE_PERSISTED);
            var cacheCounter = $C.getCache($C.CACHE_TYPE_SESSION);
            var priceAlertTrigger = null;
            var header = null;
            var form = null;
            var priceAlertBox = null;
            var submitButton = null;
            var closeButton = null;
            var vehicleName = null;
            var message = null;
            var body = null;

            var _make = '';
            var _model = '';
            var _year = '';
            var _vin = '';
            var _alertCounter = 0;
            var _email = '';
            var _cognitoId = '';
            var _zip = EDMUNDS.User.getZipcode();

            var show = function () {
                priceAlertBox.classList.add('display');
                setTimeout(function () {
                    priceAlertBox.classList.add('fadeIn');
                }, 0);
            };

            var hide = function () {
                priceAlertBox.classList.remove('display');
                priceAlertBox.classList.remove('fadeIn');
            };

            var validateForm = function () {
                return ((form.elements['name'].value !== form.elements['name'].defaultValue) &&
                        (form.elements['email'].value !== form.elements['email'].defaultValue)
                        );
            };
            var createPriceAlertTrigger = function () {
                var nav = document.getElementById('edm_main_nav');
                priceAlertTrigger = document.createElement('li');
                priceAlertTrigger.id = 'price_alert';
                priceAlertTrigger.className = 'grid-12';
                var icon = document.createElement('span');
                icon.className = 'icon icon-bell2';
                var text = document.createElement('span');
                text.className = 'text';
                text.innerHTML = 'Alerts';

                priceAlertTrigger.appendChild(icon);
                priceAlertTrigger.appendChild(text);
                priceAlertTrigger.appendChild(priceAlertBox);
                if(nav){
                    nav.insertBefore(priceAlertTrigger, document.getElementById('search_item'));
                    PAGESETUP.scope.localETrack.retrack(
                            {},
                            'module_impression',
                            {name: 'price_alert', count: _alertCounter}
                    );
                }

            };

            var initDOM = function () {
                header = document.getElementById('edm_header');
                priceAlertBox = document.querySelector('.price-alert-box');
                createPriceAlertTrigger();
                message = priceAlertBox.querySelector('.message');
                vehicleName = priceAlertBox.querySelector('.message .vehicle');
                form = priceAlertBox.querySelector('form');
                submitButton = priceAlertBox.querySelector('button');
                closeButton = priceAlertBox.querySelector('.close');
                body = priceAlertBox.querySelector('.body');
                priceAlertBox.querySelector('.message .count').innerHTML = _alertCounter;

                //create count notification
                var countAlert = document.createElement('span');
                countAlert.innerHTML = _alertCounter;
                countAlert.className = 'count';
                priceAlertTrigger.querySelector('.icon').appendChild(countAlert);
            };


            var initEventsCognito = function () {
                priceAlertTrigger.addEventListener('click', function () {
                    window.location.href = '/im/?id=' + _cognitoId + '&vin=' + _vin + '&im_source=global_nav';
                });
            };

            var initEventsNewUser = function () {
                priceAlertTrigger.addEventListener('click', function () {
                    show();
                });

                form.elements['name'].addEventListener('input', function(e){
                    if (/^\s?(\w+\s).+/.test(e.target.value)) {
                        e.target.setCustomValidity("");
                    } else {
                        e.target.setCustomValidity("Requires first and last name");
                    }
                });

                form.addEventListener('submit', function (e) {
                    if (validateForm()) {
                        priceAlertTrigger.classList.add('loading');
                        priceAlertTrigger.classList.add('grey-white');
                        body.classList.add('loading');
                        body.classList.add('grey-white');
                        //create cognitoID

                        // parse name
                        var userData = {};
                        var splitName = '';
                        userData.fullName =form.elements['name'].value.trim();
                        userData.firstName = '';
                        userData.lastName = '';
                        // If one space in the name
                        if ((userData.fullName.match(new RegExp(" ", "g")) || []).length == 1) {
                            splitName = userData.fullName.split(' ');
                            userData.firstName = splitName[0];
                            userData.lastName = splitName[1];
                        } else if ((userData.fullName.match(new RegExp(" ", "g")) || []).length == 2) {
                            splitName = userData.fullName.split(' ');
                            userData.firstName = splitName[0] + " " + splitName[1];
                            userData.lastName = splitName[2];
                        } else {
                            userData.firstName = userData.fullName;
                        }
                        var userInfo = {
                            firstName: userData.firstName,
                            lastName: userData.lastName,
                            email: form.elements['email'].value,
                            phone: '',
                            visitorId: EDM.Core.Visitor.Service.getUser().visitorId,
                            zip: _zip
                        };
                        var prospectEntryPoint = 'global_nav_entry';
                        var savedSearches = [{
                            make: _make,
                            model: _model,
                            vins: []
                        }];
                        $IM.init(userInfo.email, prospectEntryPoint, true).then(function (result) {
                            if ($IM.isNewUser()) {
                                return $IM.suggestedFromUDMAndPropensity(2, savedSearches);
                            } else {
                                return [];
                            }
                        }).then(function(suggestedSearches) {
                            return $IM.upsertFullRecord({
                                async: false,
                                userInfo: userInfo,
                                lastLead: {},
                                savedSearches: savedSearches,
                                suggestedSearches: suggestedSearches
                            });
                        }).then(function() {
                            _cognitoId = EDM.Core.Visitor.Service.getPersistentData("imRecentCognitoId");
                            EDM.IntelligentMessaging.Tracking.trackTag(_cognitoId, 'global_nav_entry', function(){
                                window.location.href = '/im/?id=' + _cognitoId + '&vin=' + _vin + '&im_source=global_nav';
                            });
                        })["catch"](function(err) {
                            priceAlertTrigger.classList.remove('loading');
                            priceAlertTrigger.classList.remove('grey-white');
                            body.classList.remove('loading');
                            body.classList.remove('grey-white');
                            hide();
                        });

                        PAGESETUP.scope.localETrack.retrack(
                                {},
                                'button_click',
                                {name: 'price_alert', full_name: 'true', email: 'true'}
                        );
                    }
                    e.preventDefault();
                    return false;
                });
                closeButton.addEventListener('click', function (e) {
                    //add to session
                    cache.set(SESSION_CACHE_KEY, true);
                    hide();
                    e.stopPropagation();
                });
            };

            var isSearchReady = function() {
                var udmVehicles = $JSON.parse(localStorage.getItem("udm.vehicles"));
                if(udmVehicles) {
                    var maxCountVehicle = udmVehicles.reduce(function(x, y){ return ((x.count> y.count) && (x.state =='new')) ? x : y });
                    return {
                        ready: (maxCountVehicle.count > 0),
                        make: maxCountVehicle.make || '',
                        model: maxCountVehicle.model ||'',
                        year: maxCountVehicle.year ||''
                    };
                }
                return {
                    ready: false,
                    make: '',
                    model: '',
                    year: ''
                };
            };

            var getCognitoUserEmail = function(){
                return EDM.Core.Visitor.Service.getPersistentData('imRecentEmail') || false;
            };

            this.init = function(){
                _email = getCognitoUserEmail();
                var _isSearchReady = isSearchReady();
                if (_isSearchReady.ready) {
                        _make = _isSearchReady.make;
                        _model = _isSearchReady.model;
                        _year = _isSearchReady.year;
                    var getVinUrl = '/api/inventory/v1/'+ _make +'/'+ _model +'/dealers/pp/list/?zip='+ _zip +
                            '&range=50&groupItemsSize=1&sortBy=distance:asc,guaranteedPrice:asc&groupItemsSortBy=guaranteedPrice:desc&years='+ _year +
                            '&premierDealer=true&facetCounts=false&pageSize=1&includeLeaseInfo=&useAtomFileForLeasePromise=&useDealerLPStatus=&'+
                            'view=custom,fieldsInclude:guaranteedPrice,guaranteedPriceExpireDate,vin,make,model,year,submodel,price,photoUrl,id,'+
                            'franchiseId,trim,dealerDistance,displayTrim,locationId,styleId,style,extColor,intColor,stockId,dealerName,dealerPhone,'+
                            'dealerCity,roofTopLogicalName,dealerStateName,salesOverAllRating,salesDealerReviewCount,ppStatus,nciPremierDealer,isCoop'+
                            '&partnerMsrp=&applyNortheastRules=false&excludeUserWebInventory=true&ppRadiusRestriction=true&excludeFordDirectDealers=true&applyCustomZip=true';
                    $AJAX.get(getVinUrl, {
                        success: function(o) {
                            var data = $JSON.parse(o.responseText);
                            var vehicleInventoryItems = data.vehicleInventoryGroups[0];
                            if (vehicleInventoryItems && vehicleInventoryItems.vehicleInventoryItems[0].ppStatus === "active"){
                                _vin = vehicleInventoryItems.vehicleInventoryItems[0].vin;
                            }
                        }
                    });

                    if(_email) {  // cognito user
                        $IM.init(_email).then(function() {
                            return $IM.getCognitoData('IntelligentMessaging');
                        }).then(function(im) {
                            //im is a JSON object.  Process the data to find out alerts per make/model
                            // check for im148_ctrl name
                            if(!/^im148_ctrl/.test(im.recipeName)){
                                var savedSearches = im.savedSearches;
                                var alertsQueue = im.alertsQueue;
                                var savedSearchesAlerts = savedSearches.map(function(savedSearch){
                                    var alert = 0;
                                    savedSearch.vins.forEach(function(vinObj){
                                        if(alertsQueue.some(function(alertQueue){return (alertQueue.alertType === "PRICE_DROP" && alertQueue.relatedVin === vinObj.vin)})){
                                            alert++;
                                        }
                                    });
                                    return {
                                        make: savedSearch.make,
                                        model: savedSearch.model,
                                        alerts: alert
                                    }
                                });
                                var maxAlert = savedSearchesAlerts.reduce(function(x, y){ return (x.alerts > y.alerts) ? x : y });
                                _alertCounter = maxAlert.alerts;

                            } else {
                                _alertCounter = 0;
                            }
                            if(_alertCounter > 0) {
                                initDOM();
                                _cognitoId = EDM.Core.Visitor.Service.getPersistentData("imRecentCognitoId");
                                initEventsCognito();
                                if (header){
                                    header.classList.add('showPriceAlert');
                                }
                            }
                        }).catch(function(err) {
                            //log error message
                        });
                    } else { // new user
                        var values = {};
                            values.zip = _zip;
                            values.make = _make;
                            values.model = _model;
                        var url = $M.replace(REST, values);
                        var obj = {
                            success: function(o) {
                                var data = $JSON.parse(o.responseText);
                                _alertCounter = data.results.length;
                                if(_alertCounter > 0){
                                    initDOM();
                                    initEventsNewUser();
                                    vehicleName.innerHTML = [_make, _model].join(' ');
                                    if (_alertCounter === 1) {
                                        message.innerHTML = message.innerHTML.replace('have', 'has').replace('these', 'this').replace('cars', 'car');
                                    }
                                    if(header){
                                        header.classList.add('showPriceAlert');
                                    }
                                    cache.get(SESSION_CACHE_KEY, function (found, data) {
                                        if (!found) {
                                            //show modal
                                            show();
                                        }
                                    });

                                }
                            },
                            failure: function() {

                            }
                        };
                            // this is mock for API
                            obj.success({responseText: '{"results":[1]}'});
                    }
                }
            };
        };

        EDM.PriceAlertBox.init();
    });
</script>

    



        




        


        

        
        

        

        



<script>
    if (window.performance && performance.mark) {
        performance.mark("edmParseMarkupQLoaderExecuteStart");
    }
</script>

    <script type="text/javascript">
        if(window.EDM && EDM.qLoader) {
            setTimeout(function(){
                var count = 0;
                var cb = function() {
                    count += 1;
                    if (count === 2) {
                        setTimeout(function(){EDM.qLoader.execute()}, 200);
                    }
                };
                // NSE-198 TEMPORARY
                var deferAllAds = false;
                for (var i =0; i < EDM.PageValues.wtf.campaigns.length; i++) {
                    if (EDM.PageValues.wtf.campaigns[i].recipe ==='nse198-chalda' || EDM.PageValues.wtf.campaigns[i].recipe ==='nse198-chala6da') {
                        deferAllAds = true;
                    }
                }
                if (deferAllAds) {
                    EDM.qLoader.execute(1035, function(){
                        EDM.qLoader.execute();
                        setTimeout( function(){
                            EDM.qLoader.executeNoWait();
                        },250);
                    });
                }
                // END NSE-198 TEMPORARY
                else {
                    EDM.qLoader.execute(1035, cb);
                        EDM.qLoader.executeNoWait(cb);
                }
            },10);

        } else {
            document.write('<script type=\"text/javascript\" src=\"//static.ed.edmunds-media.com/edmunds-webassets/2.2.1190/wro/edmui.loader.js\" charset=\"utf-8\"\></script\>');
        }
    </script>


    <script type="text/javascript">
        EDM.qLoader.defer('nowait', function(){
            if(EDM && EDM.Ads && EDM.Ads.Factory && EDM.Ads.Factory.processAndDisplayAds) {
                EDM.Ads.Factory.processAndDisplayAds();
            }
        });
    </script>

<script>
    if (window.performance && performance.mark) {
        performance.mark("edmParseMarkupEnd");
    }
</script>


        <script>
                    window.onresize = function() {
            var iframes = document.querySelectorAll("iframe");
            for(var i = 0; i < iframes.length; i++) {
                var originalHeight = iframes[i].height;
                if (originalHeight && parseInt(originalHeight) > 0) {
                    iframes[i].height = "" + (parseInt(originalHeight) - 1) + "";
                    if(iframes[i].src == "") {
                        iframes[i].contentWindow.scrollTo(0, parseInt(originalHeight) + 1);
                        iframes[i].contentWindow.scrollTo(0, parseInt(originalHeight) - 1);
                    }
                    iframes[i].height = originalHeight;
                }
            }
        }

        </script>



</body>
</html>
